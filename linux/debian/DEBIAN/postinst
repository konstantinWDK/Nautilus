#!/bin/bash
# Script post-instalaciÃ³n para nautilus-vscode-widget
# VersiÃ³n simplificada para evitar problemas de permisos

set -e

echo "Configurando Nautilus VSCode Widget..."

# Detener versiones anteriores que puedan estar ejecutÃ¡ndose
echo "Deteniendo versiones anteriores..."
pkill -f "nautilus-vscode-widget.py" 2>/dev/null || true
pkill -f "nautilus-vscode-widget" 2>/dev/null || true
sleep 1

# Actualizar cachÃ© de iconos (solo si es posible)
echo "Actualizando cachÃ© de iconos..."
if command -v gtk-update-icon-cache >/dev/null 2>&1; then
    gtk-update-icon-cache -f -t /usr/share/icons/hicolor 2>/dev/null || true
fi

# Actualizar base de datos de aplicaciones (solo si es posible)
if command -v update-desktop-database >/dev/null 2>&1; then
    update-desktop-database /usr/share/applications 2>/dev/null || true
fi

echo ""
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "âœ… Nautilus VSCode Widget instalado correctamente"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo "VersiÃ³n: 3.3.0"
echo ""
echo "ğŸ“ UbicaciÃ³n del programa: /usr/share/nautilus-vscode-widget/"
echo "âš™ï¸  ConfiguraciÃ³n guardada en: ~/.config/nautilus-vscode-widget/"
echo ""
echo "ğŸ’¡ Comandos Ãºtiles:"
echo "   â€¢ Iniciar:      nautilus-vscode-widget"
echo "   â€¢ Reiniciar:    pkill -f nautilus-vscode-widget && nautilus-vscode-widget"
echo "   â€¢ Ver procesos: ps aux | grep nautilus-vscode-widget"
echo ""
echo "âš ï¸  Para iniciar ahora, ejecuta: nautilus-vscode-widget"
echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
echo ""

exit 0
